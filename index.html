<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Kopi Prima - Premium Coffee Supplier</title>
    <link rel="stylesheet" href="css/style.css" />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
      rel="stylesheet"
    />
  </head>
  <body>
    <nav class="navbar">
      <div class="nav-container">
        <!-- Logo -->
        <div class="nav-logo">
          <div class="logo">
            <i class="fas fa-coffee"></i>
            KOPI PRIMA
          </div>
        </div>

        <!-- Menu Navigasi -->
        <ul class="nav-menu">
          <li class="nav-item">
            <a href="#home" class="nav-link active">Home</a>
          </li>
          <li class="nav-item">
            <a href="#profile" class="nav-link">Our Profile</a>
          </li>
          <li class="nav-item">
            <a href="#products" class="nav-link">Products</a>
          </li>
          <li class="nav-item">
            <a href="#quality" class="nav-link">Quality</a>
          </li>
          <li class="nav-item">
            <a href="#contact" class="nav-link">Contact</a>
          </li>
        </ul>

        <!-- Login Section untuk Desktop -->
        <div id="loginSection" class="login-section">
          <span id="userInfo" class="user-info" style="display: none"></span>
          <a href="login.html" class="btn btn-login" id="loginBtn">Login</a>
          <button id="logoutBtn" class="btn btn-logout" style="display: none">
            Logout
          </button>
        </div>

        <!-- Hamburger Menu -->
        <div class="hamburger">
          <span class="bar"></span>
          <span class="bar"></span>
          <span class="bar"></span>
        </div>
      </div>
    </nav>

    <main class="main-content">
      <section id="home" class="section">
        <div class="hero-section">
          <div class="hero-content">
            <h1 class="welcome-text" id="welcomeMessage">
              Hi <span id="userName">Guest</span>, Welcome to Kopi Prima
            </h1>
            <h2 class="hero-subtitle">Premium Coffee Supplier Since 1985</h2>
            <p class="hero-description">
              Menyediakan biji kopi berkualitas tinggi dari perkebunan terbaik
              di Indonesia
            </p>
            <div class="hero-buttons">
              <a href="#products" class="btn btn-primary">Lihat Produk</a>
              <a href="#contact" class="btn btn-secondary">Hubungi Kami</a>
            </div>
          </div>
          <div class="hero-image">
            <img
              src="https://images.unsplash.com/photo-1447933601403-0c6688de566e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2061&q=80"
              alt="Coffee Beans"
            />
          </div>
        </div>
      </section>

      <section id="profile" class="section">
        <div class="profile-section">
          <div class="container">
            <h2 class="section-title">Profil Perusahaan</h2>
            <div class="profile-content">
              <div class="profile-text">
                <h3>PT. Kopi Prima Indonesia</h3>
                <p>
                  Sebagai pelopor dalam industri kopi sejak 1985, Kopi Prima
                  telah menjadi pemasok terpercaya biji kopi berkualitas tinggi
                  dari berbagai daerah di Indonesia. Kami mengutamakan kualitas,
                  konsistensi, dan inovasi dalam setiap produk yang kami
                  hasilkan.
                </p>
                <p>
                  Dengan pengalaman lebih dari 35 tahun, kami memahami
                  seluk-beluk industri kopi dan terus berkomitmen untuk
                  memberikan yang terbaik kepada pelanggan kami.
                </p>
                <div class="profile-stats">
                  <div class="stat-item">
                    <h4>35+</h4>
                    <p>Tahun Pengalaman</p>
                  </div>
                  <div class="stat-item">
                    <h4>50+</h4>
                    <p>Jenis Produk</p>
                  </div>
                  <div class="stat-item">
                    <h4>1000+</h4>
                    <p>Klien Terpuaskan</p>
                  </div>
                </div>
              </div>
              <div class="profile-image">
                <img
                  src="https://images.unsplash.com/photo-1559056199-641a0ac8b55e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80"
                  alt="Coffee Factory"
                />
              </div>
            </div>

            <div class="vision-mission">
              <div class="vision">
                <div class="icon">
                  <i class="fas fa-eye"></i>
                </div>
                <h3>Visi Kami</h3>
                <p>
                  Menjadi perusahaan kopi terdepan yang diakui secara global
                  dalam hal kualitas, inovasi, dan keberlanjutan, sambil
                  melestarikan warisan kopi Indonesia.
                </p>
              </div>
              <div class="mission">
                <div class="icon">
                  <i class="fas fa-bullseye"></i>
                </div>
                <h3>Misi Kami</h3>
                <p>
                  Menyediakan biji kopi berkualitas tertinggi melalui proses
                  yang berkelanjutan, membangun kemitraan jangka panjang, dan
                  terus berinovasi untuk memenuhi kebutuhan pasar yang
                  berkembang.
                </p>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section id="products" class="section">
        <div class="products-section">
          <div class="container">
            <h2 class="section-title">Produk Kami</h2>
            <p class="section-subtitle">
              Berbagai jenis biji kopi berkualitas dari daerah terbaik di
              Indonesia
            </p>

            <div class="products-grid">
              <div class="product-card">
                <div class="product-image">
                  <img
                    src="https://images.unsplash.com/photo-1587734195503-904fca47e0e9?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80"
                    alt="Arabica Coffee"
                  />
                </div>
                <div class="product-content">
                  <h3>Kopi Arabica</h3>
                  <p>
                    Biji kopi Arabica dengan aroma yang harum dan rasa yang
                    kompleks dari daerah Gayo, Toraja, dan Kintamani.
                  </p>
                  <div class="product-specs">
                    <span><i class="fas fa-mountain"></i> Daerah Tinggi</span>
                    <span><i class="fas fa-wine-bottle"></i> Medium Roast</span>
                  </div>
                </div>
              </div>

              <div class="product-card">
                <div class="product-image">
                  <img
                    src="https://images.unsplash.com/photo-1544787219-7f47ccb76574?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2068&q=80"
                    alt="Robusta Coffee"
                  />
                </div>
                <div class="product-content">
                  <h3>Kopi Robusta</h3>
                  <p>
                    Kopi Robusta dengan cita rasa kuat dan kandungan kafein
                    tinggi, perfect untuk espresso blend.
                  </p>
                  <div class="product-specs">
                    <span><i class="fas fa-tint"></i> High Caffeine</span>
                    <span><i class="fas fa-fire"></i> Dark Roast</span>
                  </div>
                </div>
              </div>

              <div class="product-card">
                <div class="product-image">
                  <img
                    src="https://images.unsplash.com/photo-1511537190424-bbbab87ac5eb?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80"
                    alt="Specialty Coffee"
                  />
                </div>
                <div class="product-content">
                  <h3>Specialty Coffee</h3>
                  <p>
                    Kopi spesialti dengan grade tinggi, melalui proses seleksi
                    ketat untuk pengalaman kopi terbaik.
                  </p>
                  <div class="product-specs">
                    <span><i class="fas fa-star"></i> Grade 1</span>
                    <span><i class="fas fa-award"></i> Specialty</span>
                  </div>
                </div>
              </div>

              <div class="product-card">
                <div class="product-image">
                  <img
                    src="https://images.unsplash.com/photo-1568649929103-28ffbefaca1e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80"
                    alt="Coffee Blends"
                  />
                </div>
                <div class="product-content">
                  <h3>Custom Blends</h3>
                  <p>
                    Blend kopi custom sesuai kebutuhan bisnis Anda, dengan
                    konsistensi rasa yang terjamin.
                  </p>
                  <div class="product-specs">
                    <span><i class="fas fa-cogs"></i> Custom</span>
                    <span><i class="fas fa-chart-line"></i> Consistent</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section id="quality" class="section">
        <div class="quality-section">
          <div class="container">
            <h2 class="section-title">Standar Kualitas</h2>
            <div class="quality-content">
              <div class="quality-process">
                <h3>Proses Produksi Berkualitas</h3>
                <div class="process-steps">
                  <div class="step">
                    <div class="step-number">01</div>
                    <div class="step-content">
                      <h4>Seleksi Biji</h4>
                      <p>
                        Biji kopi dipilih secara manual untuk memastikan hanya
                        yang terbaik yang diproses
                      </p>
                    </div>
                  </div>
                  <div class="step">
                    <div class="step-number">02</div>
                    <div class="step-content">
                      <h4>Pengolahan</h4>
                      <p>
                        Proses pengolahan menggunakan teknologi modern dengan
                        kontrol kualitas ketat
                      </p>
                    </div>
                  </div>
                  <div class="step">
                    <div class="step-number">03</div>
                    <div class="step-content">
                      <h4>Pemanggangan</h4>
                      <p>
                        Pemanggangan dengan suhu terkontrol untuk mengoptimalkan
                        cita rasa
                      </p>
                    </div>
                  </div>
                  <div class="step">
                    <div class="step-number">04</div>
                    <div class="step-content">
                      <h4>Pengemasan</h4>
                      <p>
                        Pengemasan vakum untuk menjaga kesegaran dan aroma kopi
                      </p>
                    </div>
                  </div>
                </div>
              </div>
              <div class="quality-certificates">
                <h3>Sertifikasi</h3>
                <div class="certificates-grid">
                  <div class="certificate">
                    <i class="fas fa-certificate"></i>
                    <h4>ISO 9001:2015</h4>
                    <p>Sistem Manajemen Mutu</p>
                  </div>
                  <div class="certificate">
                    <i class="fas fa-leaf"></i>
                    <h4>Organic Certified</h4>
                    <p>Produk Organik Bersertifikat</p>
                  </div>
                  <div class="certificate">
                    <i class="fas fa-recycle"></i>
                    <h4>Sustainability</h4>
                    <p>Praktik Berkelanjutan</p>
                  </div>
                  <div class="certificate">
                    <i class="fas fa-globe"></i>
                    <h4>Export Ready</h4>
                    <p>Standar Ekspor Internasional</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section id="contact" class="section">
        <div class="contact-section">
          <div class="container">
            <h2 class="section-title">Hubungi Kami</h2>
            <div class="contact-content">
              <div class="contact-info">
                <h3>PT. Kopi Prima Indonesia</h3>
                <div class="contact-details">
                  <div class="contact-item">
                    <i class="fas fa-map-marker-alt"></i>
                    <div>
                      <h4>Alamat</h4>
                      <p>Jl. Perkebunan No. 123<br />Jakarta Selatan 12560</p>
                    </div>
                  </div>
                  <div class="contact-item">
                    <i class="fas fa-phone"></i>
                    <div>
                      <h4>Telepon</h4>
                      <p>+62 857 9992 6085</p>
                    </div>
                  </div>
                  <div class="contact-item">
                    <i class="fas fa-envelope"></i>
                    <div>
                      <h4>Email</h4>
                      <p>info@kopiprima.co.id</p>
                    </div>
                  </div>
                  <div class="contact-item">
                    <i class="fas fa-clock"></i>
                    <div>
                      <h4>Jam Operasional</h4>
                      <p>
                        Senin - Jumat: 08:00 - 17:00<br />Sabtu: 08:00 - 14:00
                      </p>
                    </div>
                  </div>
                </div>
              </div>
              <div class="contact-form-wrapper">
                <form id="contactForm" class="contact-form">
                  <h3>Kirim Pesan</h3>
                  <div class="form-group">
                    <label for="name">Nama *</label>
                    <input
                      type="text"
                      id="name"
                      name="name"
                      placeholder="Enter your full name"
                      required
                    />
                    <span class="error-message" id="nameError"></span>
                  </div>

                  <div class="form-group">
                    <label for="email">Email *</label>
                    <input
                      type="email"
                      id="email"
                      name="email"
                      placeholder="Enter your email address"
                      required
                    />
                    <span class="error-message" id="emailError"></span>
                  </div>

                  <div class="form-group">
                    <label for="phone">Nomor Telepon *</label>
                    <input
                      type="tel"
                      id="phone"
                      name="phone"
                      placeholder="Enter your phone number"
                      required
                    />
                    <span class="error-message" id="phoneError"></span>
                  </div>

                  <div class="form-group">
                    <label for="company">Perusahaan</label>
                    <input
                      type="text"
                      id="company"
                      name="company"
                      placeholder="Nama perusahaan (opsional)"
                    />
                  </div>

                  <div class="form-group">
                    <label for="message">Pesan *</label>
                    <textarea
                      id="message"
                      name="message"
                      placeholder="Enter your message here..."
                      rows="5"
                      required
                    ></textarea>
                    <span class="error-message" id="messageError"></span>
                  </div>

                  <button type="submit" class="btn btn-primary">
                    <i class="fas fa-paper-plane"></i>
                    Kirim Pesan
                  </button>
                </form>

                <div id="formResult" class="form-result">
                  <div class="result-header">
                    <i class="fas fa-check-circle"></i>
                    <h3>Pesan Terkirim!</h3>
                  </div>
                  <div class="result-content">
                    <p><strong>Nama:</strong> <span id="resultName"></span></p>
                    <p>
                      <strong>Email:</strong> <span id="resultEmail"></span>
                    </p>
                    <p>
                      <strong>Telepon:</strong> <span id="resultPhone"></span>
                    </p>
                    <p>
                      <strong>Perusahaan:</strong>
                      <span id="resultCompany"></span>
                    </p>
                    <p>
                      <strong>Pesan:</strong> <span id="resultMessage"></span>
                    </p>
                    <p><strong>Waktu:</strong> <span id="resultTime"></span></p>
                  </div>
                  <button id="backToForm" class="btn btn-secondary">
                    <i class="fas fa-edit"></i>
                    Kirim Pesan Lain
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>

    <footer class="footer">
      <div class="footer-content">
        <div class="container">
          <div class="footer-grid">
            <div class="footer-section">
              <div class="footer-logo">
                <i class="fas fa-coffee"></i>
                KOPI PRIMA
              </div>
              <p>
                Pemasok biji kopi berkualitas tinggi sejak 1985. Komitmen kami
                adalah memberikan produk terbaik dengan layanan profesional.
              </p>
              <div class="social-links">
                <a href="#"><i class="fab fa-facebook"></i></a>
                <a href="#"><i class="fab fa-instagram"></i></a>
                <a href="#"><i class="fab fa-twitter"></i></a>
              </div>
            </div>

            <div class="footer-section">
              <h4>Produk</h4>
              <ul>
                <li><a href="#products">Kopi Arabica</a></li>
                <li><a href="#products">Kopi Robusta</a></li>
                <li><a href="#products">Specialty Coffee</a></li>
                <li><a href="#products">Custom Blends</a></li>
              </ul>
            </div>

            <div class="footer-section">
              <h4>Tautan Cepat</h4>
              <ul>
                <li><a href="#home">Beranda</a></li>
                <li><a href="#profile">Profil Kami</a></li>
                <li><a href="#products">Produk</a></li>
                <li><a href="#quality">Kualitas</a></li>
                <li><a href="#contact">Kontak</a></li>
              </ul>
            </div>

            <div class="footer-section">
              <h4>Kontak</h4>
              <div class="footer-contact">
                <p>
                  <i class="fas fa-map-marker-alt"></i> Jakarta Selatan 12560
                </p>
                <p><i class="fas fa-phone"></i> +62 857 9992 6085</p>
                <p><i class="fas fa-envelope"></i> info@kopiprima.co.id</p>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="footer-bottom">
        <div class="container">
          <p>&copy; 2024 PT. Kopi Prima Indonesia. All rights reserved.</p>
        </div>
      </div>
    </footer>

    <!-- Tambahkan sebelum script.js -->
    <script src="js/auth.js"></script>
    <script src="js/script.js"></script>
    <script>
      // ===== USER AUTHENTICATION SYSTEM =====
      function checkAuthentication() {
        const isLoggedIn = localStorage.getItem("isLoggedIn");
        const currentUser = JSON.parse(
          localStorage.getItem("currentUser") || "{}"
        );

        return {
          isLoggedIn: isLoggedIn === "true",
          user: currentUser,
        };
      }

      function updateAuthUI() {
        const auth = checkAuthentication();
        const userInfo = document.getElementById("userInfo");
        const loginBtn = document.getElementById("loginBtn");
        const logoutBtn = document.getElementById("logoutBtn");
        const userName = document.getElementById("userName");

        if (auth.isLoggedIn && auth.user) {
          // User sudah login
          if (userInfo) {
            userInfo.textContent = `Hello, ${auth.user.username}`;
            userInfo.style.display = "inline";
          }
          if (loginBtn) loginBtn.style.display = "none";
          if (logoutBtn) logoutBtn.style.display = "inline";
          if (userName) userName.textContent = auth.user.username;
        } else {
          // User belum login
          if (userInfo) userInfo.style.display = "none";
          if (loginBtn) loginBtn.style.display = "inline";
          if (logoutBtn) logoutBtn.style.display = "none";
          if (userName) userName.textContent = "Guest";
        }
      }

      function logout() {
        localStorage.removeItem("currentUser");
        localStorage.removeItem("isLoggedIn");
        localStorage.removeItem("userName");
        updateAuthUI();
        alert("Anda telah logout!");
      }

      // ===== MOBILE NAVIGATION =====
      const hamburger = document.querySelector(".hamburger");
      const navMenu = document.querySelector(".nav-menu");

      hamburger.addEventListener("click", function () {
        hamburger.classList.toggle("active");
        navMenu.classList.toggle("active");

        // Jika di mobile, tambahkan mobile login ke menu
        if (window.innerWidth <= 768) {
          if (navMenu.classList.contains("active")) {
            let mobileLoginItem = document.querySelector(".mobile-login");
            if (!mobileLoginItem) {
              mobileLoginItem = document.createElement("li");
              mobileLoginItem.className = "nav-item mobile-login";
              mobileLoginItem.innerHTML = `
                <div class="login-section-mobile">
                  <span id="userInfoMobile" class="user-info" style="display: none"></span>
                  <a href="login.html" id="loginBtnMobile" class="btn btn-login">Login</a>
                  <button id="logoutBtnMobile" class="btn btn-logout" style="display: none">Logout</button>
                </div>
              `;
              navMenu.appendChild(mobileLoginItem);
              updateMobileEventListeners();
              updateMobileLoginUI();
            } else {
              mobileLoginItem.style.display = "block";
              updateMobileLoginUI();
            }
          } else {
            const mobileLoginItem = document.querySelector(".mobile-login");
            if (mobileLoginItem) {
              mobileLoginItem.style.display = "none";
            }
          }
        }
      });

      // Tutup menu mobile ketika link diklik
      document.querySelectorAll(".nav-link").forEach((link) => {
        link.addEventListener("click", function () {
          hamburger.classList.remove("active");
          navMenu.classList.remove("active");
        });
      });

      // ===== MOBILE LOGIN SYSTEM =====
      function updateMobileLoginUI() {
        const auth = checkAuthentication();
        const userInfoMobile = document.getElementById("userInfoMobile");
        const loginBtnMobile = document.getElementById("loginBtnMobile");
        const logoutBtnMobile = document.getElementById("logoutBtnMobile");

        if (userInfoMobile && loginBtnMobile && logoutBtnMobile) {
          if (auth.isLoggedIn && auth.user) {
            userInfoMobile.textContent = `Hello, ${auth.user.username}`;
            userInfoMobile.style.display = "inline";
            logoutBtnMobile.style.display = "inline";
            loginBtnMobile.style.display = "none";
          } else {
            userInfoMobile.style.display = "none";
            logoutBtnMobile.style.display = "none";
            loginBtnMobile.style.display = "inline";
          }
        }
      }

      function updateMobileEventListeners() {
        const logoutBtnMobile = document.getElementById("logoutBtnMobile");
        if (logoutBtnMobile) {
          logoutBtnMobile.addEventListener("click", function () {
            logout();
            hamburger.classList.remove("active");
            navMenu.classList.remove("active");
          });
        }
      }

      // ===== SMOOTH SCROLLING =====
      document.querySelectorAll('a[href^="#"]').forEach((anchor) => {
        anchor.addEventListener("click", function (e) {
          e.preventDefault();
          const targetId = this.getAttribute("href");
          const targetElement = document.querySelector(targetId);

          if (targetElement) {
            document.querySelectorAll(".nav-link").forEach((link) => {
              link.classList.remove("active");
            });
            this.classList.add("active");

            window.scrollTo({
              top: targetElement.offsetTop - 80,
              behavior: "smooth",
            });
          }
        });
      });

      // ===== ACTIVE NAVIGATION ON SCROLL =====
      function updateActiveNavigation() {
        const sections = document.querySelectorAll(".section");
        const navLinks = document.querySelectorAll(".nav-link");

        let current = "";
        sections.forEach((section) => {
          const sectionTop = section.offsetTop;
          const sectionHeight = section.clientHeight;
          if (scrollY >= sectionTop - 100) {
            current = section.getAttribute("id");
          }
        });

        navLinks.forEach((link) => {
          link.classList.remove("active");
          if (link.getAttribute("href") === `#${current}`) {
            link.classList.add("active");
          }
        });
      }

      // ===== CONTACT FORM HANDLING =====
      const contactForm = document.getElementById("contactForm");
      const formResult = document.getElementById("formResult");
      const backToForm = document.getElementById("backToForm");

      if (contactForm) {
        contactForm.addEventListener("submit", function (e) {
          e.preventDefault();

          document.querySelectorAll(".error-message").forEach((error) => {
            error.style.display = "none";
            error.textContent = "";
          });

          const name = document.getElementById("name").value.trim();
          const email = document.getElementById("email").value.trim();
          const phone = document.getElementById("phone").value.trim();
          const company = document.getElementById("company").value.trim();
          const message = document.getElementById("message").value.trim();

          let isValid = true;

          // Name validation
          if (name === "") {
            showError("nameError", "Name is required");
            isValid = false;
          } else if (name.length < 2) {
            showError("nameError", "Name must be at least 2 characters long");
            isValid = false;
          }

          // Email validation
          const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
          if (email === "") {
            showError("emailError", "Email is required");
            isValid = false;
          } else if (!emailRegex.test(email)) {
            showError("emailError", "Please enter a valid email address");
            isValid = false;
          }

          // Phone validation
          const phoneRegex = /^(?:\+62|62|0)[2-9][0-9]{7,11}$/;
          const cleanedPhone = phone.replace(/\D/g, "");
          if (phone === "") {
            showError("phoneError", "Phone number is required");
            isValid = false;
          } else if (!phoneRegex.test(cleanedPhone)) {
            showError(
              "phoneError",
              "Please enter a valid Indonesian phone number"
            );
            isValid = false;
          }

          // Message validation
          if (message === "") {
            showError("messageError", "Message is required");
            isValid = false;
          } else if (message.length < 10) {
            showError(
              "messageError",
              "Message must be at least 10 characters long"
            );
            isValid = false;
          }

          if (isValid) {
            const isLoggedIn = localStorage.getItem("isLoggedIn");
            if (!isLoggedIn) {
              localStorage.setItem("userName", name);
            }

            // Display form results
            document.getElementById("resultName").textContent = name;
            document.getElementById("resultEmail").textContent = email;
            document.getElementById("resultPhone").textContent = phone;
            document.getElementById("resultCompany").textContent =
              company || "Not provided";
            document.getElementById("resultMessage").textContent = message;
            document.getElementById("resultTime").textContent =
              new Date().toLocaleString();

            // Show result and hide form
            contactForm.style.display = "none";
            formResult.style.display = "block";

            // Update welcome message jika user baru
            if (!isLoggedIn) {
              updateAuthUI();
            }

            // Scroll to result
            formResult.scrollIntoView({ behavior: "smooth", block: "center" });

            // Show success message
            setTimeout(() => {
              alert(
                `Thank you ${name}! Your message has been submitted successfully.`
              );
            }, 500);
          }
        });
      }

      // Helper function to show error messages
      function showError(elementId, message) {
        const errorElement = document.getElementById(elementId);
        errorElement.textContent = message;
        errorElement.style.display = "block";
      }

      // Back to form functionality
      if (backToForm) {
        backToForm.addEventListener("click", function () {
          formResult.style.display = "none";
          contactForm.style.display = "block";
          contactForm.reset();
          contactForm.scrollIntoView({ behavior: "smooth", block: "center" });
        });
      }

      // ===== REAL-TIME FORM VALIDATION =====
      function setupRealTimeValidation() {
        const nameInput = document.getElementById("name");
        if (nameInput) {
          nameInput.addEventListener("input", function () {
            if (this.value.trim().length >= 2) {
              hideError("nameError");
            }
          });
        }

        const emailInput = document.getElementById("email");
        if (emailInput) {
          emailInput.addEventListener("input", function () {
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (emailRegex.test(this.value.trim())) {
              hideError("emailError");
            }
          });
        }

        const phoneInput = document.getElementById("phone");
        if (phoneInput) {
          phoneInput.addEventListener("input", function () {
            const phoneRegex = /^(?:\+62|62|0)[2-9][0-9]{7,11}$/;
            const cleanedPhone = this.value.replace(/\D/g, "");
            if (phoneRegex.test(cleanedPhone)) {
              hideError("phoneError");
            }
          });
        }

        const messageInput = document.getElementById("message");
        if (messageInput) {
          messageInput.addEventListener("input", function () {
            if (this.value.trim().length >= 10) {
              hideError("messageError");
            }
          });
        }
      }

      // Helper function to hide error messages
      function hideError(elementId) {
        const errorElement = document.getElementById(elementId);
        errorElement.style.display = "none";
      }

      // ===== INITIALIZE ALL SYSTEMS =====
      document.addEventListener("DOMContentLoaded", function () {
        updateAuthUI();
        setupRealTimeValidation();

        // Event listener untuk logout button
        const logoutBtn = document.getElementById("logoutBtn");
        if (logoutBtn) {
          logoutBtn.addEventListener("click", logout);
        }

        // Scroll event listeners
        window.addEventListener("scroll", updateActiveNavigation);
      });

      // ===== ANIMATIONS =====
      const observerOptions = {
        threshold: 0.1,
        rootMargin: "0px 0px -50px 0px",
      };

      const observer = new IntersectionObserver((entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            entry.target.style.opacity = "1";
            entry.target.style.transform = "translateY(0)";
          }
        });
      }, observerOptions);

      // Observe elements for animation
      document
        .querySelectorAll(".product-card, .stat-item, .step, .certificate")
        .forEach((el) => {
          el.style.opacity = "0";
          el.style.transform = "translateY(20px)";
          el.style.transition = "opacity 0.6s ease, transform 0.6s ease";
          observer.observe(el);
        });

      // Coffee bean animation
      function createCoffeeBean() {
        const bean = document.createElement("div");
        bean.innerHTML = "â˜•";
        bean.style.position = "fixed";
        bean.style.top = "-50px";
        bean.style.left = Math.random() * window.innerWidth + "px";
        bean.style.fontSize = Math.random() * 20 + 10 + "px";
        bean.style.opacity = "0.7";
        bean.style.zIndex = "-1";
        bean.style.pointerEvents = "none";
        bean.style.animation = `fall ${Math.random() * 3 + 2}s linear forwards`;

        document.body.appendChild(bean);

        setTimeout(() => {
          bean.remove();
        }, 5000);
      }

      // Add falling coffee beans animation
      const style = document.createElement("style");
      style.textContent = `
        @keyframes fall {
          to {
            transform: translateY(100vh) rotate(360deg);
            opacity: 0;
          }
        }
      `;
      document.head.appendChild(style);

      setInterval(createCoffeeBean, 1000);
    </script>
  </body>
</html>
